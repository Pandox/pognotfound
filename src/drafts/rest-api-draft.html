include "../includes/head.html"

<!-- Blog Posts -->
<section>
    <main>
        <div class="row">
            <div class="small-12 small-centered columns">

                <!-- Article -->
                <article class="clearfix card shadow-1">
                    <div class="content small-12 columns">
                        <h3>Introdução</h3>

                        <p>
                            Nós, desenvolvedores, focamos nosso esforço em construir softwares com alta qualidade de código.
                            Grande volume de testes unitários e código limpo são palavras chaves de todo bom programador.
                            Livros como <a href="http://www.amazon.com/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882" target="_blank">Clean Code</a>
                            e
                            <a href="http://www.amazon.com/The-Pragmatic-Programmer-Journeyman-Master/dp/020161622X" target="_blank">The Pragmatic Programmer</a> surgem em conversas dessa
                            natureza.
                            Mas muitos não focam esse esforço em suas APIs.
                        </p>

                        <h4>O que é uma API?</h4>
                        <p>
                            Application Programming Interface, ou simplesmente API, é uma lista de rotinas, ferramentas e protocolos para construir software.
                            Ela é usada para os programas se comunicarem entre si.
                            Por exemplo, o Windows possui uma API para receber dados vindos de um device (teclado, mouse)
                            e uma outra API para o Word poder ler esses dados e exibir na tela para o usuário.
                        </p>

                        <p>
                            Ser o desenvolvedor de uma API e ser o consumidor dela geram interesses conflitantes. No momento da construção,
                            você quer gastar o <strong>maior esforço possível</strong> para melhorar a qualidade do seu sistema internamente.
                            <br />
                            Ao mesmo tempo, quando você se torna o consumidor, você quer gastar o <strong>menor tempo possível</strong>
                            para poder utilizar aquele serviço. E se caso a API seja mal construída, você ficará bem nervoso com ela.
                        </p>

                        <p>
                            Se você já teve que utilizar a API do Facebook,
                            <a
                                href="http://techcrunch.com/2011/08/11/facebook-wins-worst-api-in-developer-survey/"
                                target="_blank">
                            você sabe do que eu estou falando (facebook wins worst API in developer survey).</a><br />
                        </p>

                        <p>
                            Como você não pode se dar ao luxo de possuir uma base de dados de 1 bilhão de usuários,
                            fazer uma boa API é essencial para aumentar a adoção de clientes.
                        </p>

                        <blockquote>
                            Uma API é a UI de desenvolvedor. Faça bom proveito da UX e seus clientes voltarão!<br />
                        </blockquote>

                        <h3>As 7 dicas de ouro</h3>

                        <h4>1. Utilize o protocolo HTTP</h4>
                        <p>
                            Se existe um termo que está aumentando exponencialmente na área de TI é RESTful (vamor deixar <a
                                href="http://martinfowler.com/articles/microservices.html"
                                target="_blank">micro-serviços</a> para um próximo post).
                            <a href="http://roy.gbiv.com/" target="_blank"> Roy Fielding</a> foi a primeira pessoa a introduzir o conceito, em sua tão famosa dissertação
                            <a href="http://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm" target="_blank">"Architectural Styles and
                                the Design of Network-based Software Architectures"</a>.
                        </p>

                        <p>
                            Utilizar o HTTP como protocolo e REST como padrão de arquitetura para sua API lhe trará uma série de benefícios, como facilidade de uso (todo browser implementa o protocolo),
                            segurança, cache, escalabilidade e <a href="https://pt.wikipedia.org/wiki/Manutenibilidade"
                                                                  target="_blank"> manutenibilidade</a>.
                        </p>

                        <h4>2. Abuse e use dos conceitos RESTful</h4>
                        <p>
                            O REST girá em torno de seus recursos. Ele manda você construir sua API em recursos que são manipulados através dos métodos HTTP, cada qual com sua função.<br />
                            Os <strong>recursos</strong> devem ser substantivos e devem fazer sentido para seus clientes. Não exponha recursos que não serão necessários.
                        </p>

                        <h4>3. Mantenha as URLs pequenas e concisas</h4>
                        <p>
                            Ninguém gosta de métodos com nomes gigantes, sem sentido ou que precisem de comentários para serem entendidos. Por que fazer isso com sua API?
                        </p>
                        <p>
                            Crie URLs curtas e que sejam de fácil entendimento. Se beneficie dos métodos HTTP GET, POST, PUT, DELETE, PATCH para indicar sua ação. Veja alguns exemplos <strong>REAIS</strong>.
                        </p>

                        <ul>
                            <li>GET /usuarios/1 - Busca o usuário de ID 1</li>
                            <li>GET /usuarios/1/playlists/9 - Busca a playlist 9 do usuário 1</li>
                            <li>POST /playlists - Cria uma nova playlist</li>
                        </ul>

                        <p>Agora veja os mesmos casos de uma forma incorreta. Consegue encontrar quantos erros existem nas URLs abaixo?</p>
                        <ul>
                            <li>GET /buscarUsuariosPorParam?idUser=1 - Busca o usuário de ID 1</li>
                            <li>GET /usuarios/buscarPlaylists/9?idUser=1 - Busca a playlist 9 do usuário 1</li>
                            <li>GET /playlists/criar - Cria uma nova playlist</li>
                        </ul>

                        <h4>4. Use JSON sempre que possível</h4>
                        <p>A representação dos seus recursos deve ser em formato JSON. Se JSON for impossível de implementar, volte para o XML. Tome cuidado com qualquer outro tipo de exposição.</p>
                        <pre>
{
    "id": 1,
    "nome": "Matheus",
    "site": "POGnotFound.com"
}
                        </pre>
                        <p>O JSON possui uma série de vantagens sobre o XML.</p>
                        <ul>
                            <li>XML é díficil de ser lido por seres humanos. (Lembre-se nos seus clientes).</li>
                            <li>Normalmente o XML é mais pesado, portanto, mais lento para ser interpretado pela máquina e transferido pela rede.</li>
                            <li>JSON está sendo adotado por todo o mundo.</li>
                            <li>Mapear seus recursos em XML pode lhe trazer algumas dúvidas em relação a atributos ou elementos.</li>
                        </ul>

                        <p>JSON lhe permite escalar sua API sem afetar os antigos clientes. Incluir campos a mais em seu recurso não deve impactar os clientes que jã estão utilizando sua API. O que nos remete ao próximo item.</p>

                        <h4>5. Nunca versione</h4>
                        <p>
                            Muitos artigos descrevem como e quando versionar sua API. Afinal, ao fazer qualquer alteração no contrato JSON, você não quer mandar seus antigos clientes atualizarem as pressas suas aplicações.<br />
                            Muitos parsers de JSON já suportam a funcionalidade de ignorar atributos desconhecidos, portanto, desde que você não altere os campos antigos, incluir novos atributos não deve ser um problema.
                        </p>

                        <p><strong>Mas e se você não tiver escolha?</strong> Vejamos um exemplo de uma cafeteira de grãos :</p>
                        <pre>
GET /cafeteiras/1
{
    id: 1,
    nome: "Cafeteira Elétrica Simples POG Edition",
    cafe: 500.00
}
                        </pre>
                        <p>
                            Esse JSON indica que a cafeteira possui 500 gramas de café. Mas nossa equipe de produtos desenvolveu uma cafeteira multigrãos que possui um compartimento para mais de um tipo de café.
                            Nossa API deve ser alterada. Incluir um campo novo, chamado de cafe2, pode ser uma solução, mas não a mais elegante.
                        </p>
<pre>
GET /cafeteiras/2
{
    id: 2,
    nome: "Cafeteira Elétrica Simples POG Edition",
    cafe: 500.00
    cafe2: 500.00
}

</pre>

                        <p>Ao invés disso precisamos criar uma estrutura de dados melhor para o campo cafe.</p>
<pre>
GET /cafeteiras/2
{
    id: 2,
    nome: "Cafeteira Elétrica MultiGrãos POG Edition",
    cafe: [
        {
            quantidade: 500.00,
            tipo: "Cafe Moido Zalita"
        },
        {
            quantidade: 500.00,
            tipo: "Cafe Gourmet++"
        }
    ]
}
</pre>

                        <p>
                            Mas como fazer isso sem versionamento? Se o seu recurso foi alterado drasticamente, como no nosso caso, ele não represente mais o mesmo recurso.
                            Ele deve ser mapeado e construído como um novo recurso e com isso, uma nova URL. Sendo assim, os dois recursos viverão para sempre no ciclo de vida da sua API, não afetando antigos nem novos clientes.
                        </p>
<pre>
GET /cafeteiras/multigraos/10
</pre>

                        <h4>6. Documentação</h4>
                        <p>Uma API sem documentação não é uma boa API. Seja claro e mostre exemplos completos e reais de requisições da sua API.</p>

                        <p>Utilize softwares para geração automática e gerenciamento de sua documentação como por exemplo o
                            <a href="https://apigee.com/about/" target="_blank"> Apigee</a> e <a href="http://swagger.io/" target="_blank">Swagger</a></p>

                        <p>Uma vez que sua API se tornou pública, mantenha o changelog em sua documentação, seja transparente em casos de falhas e indique futuras alteraçoes.</p>


                        <p>Construir uma SDK para utilização de sua API também é uma boa, apesar do alto custo de desenvolvimento.</p>

                        <h4>Utilize sua API !</h4>
                        <p>Você já deve ter ouvido falar que desenvolvimento de software não é uma ciência exata. Por isso, utilize sua API, fique do outro lado da moeda e seja o cliente da sua API. Peça feedback, mantenha um canal ativo
                        com seus clientes-desenvolvedores para melhorar ainda mais sua API. Pense (e pense bastante) antes de disponibilizá-la para o público. Conceitos como segurança, caching, autenticação, tráfego de rede,
                        latencia, entre outros, devem ser analisados e testados. </p>

                        <h3>Inspire-se</h3>
                        <p>Selecionei alguns exemplos de APIs mundialmente famosas para você se basear e ter algumas ídeias.</p>
                        <ul>
                            <li><a href="https://developers.facebook.com/docs/graph-api/overview/" target="_blank">Facebook API</a></li>
                            <li><a href="https://dev.twitter.com/overview/documentation" target="_blank">Twitter API</a> </li>
                            <li><a href="https://developer.github.com/v3/" target="_blank"> Github API</a></li>
                            <li><a href="http://apidev.accuweather.com/developers/" target="_blank"> Accuweather API</a></li>
                        </ul>

                        <!--
                        <p>
                            Podemos imaginar uma API para uma cafeteira elétrica, essas de colocar a capsúla.
                        </p>
                        <p><strong>Protocolo: </strong> Manual. O usuário utiliza das mãos para se comunicar com o sistema cafeteira.</p>
                        <p><strong>Rotinas: </strong> Funções da cafeteira.</p>
                        <ul>
                            <li>Ligar</li>
                            <li>Desligar</li>
                            <li>Escolher nível de água</li>
                            <li>Preparar bebida</li>
                            <li>Inserir a cápsula</li>
                            <li>Retirar as cápsulas</li>
                        </ul>
                        -->

                        <h4></h4>

                    </div>

                </article>
            </div>
        </div>
    </main>
</section>

