include "../includes/head.html"

<!-- Blog Posts -->
http://www.infoq.com/presentations/rest-introduction?utm_source=infoqEmail&utm_medium=WeeklyNL_EditorialContentArchitectureDesign&utm_campaign=09292015news

<section>
    <main>
        <div class="row">
            <div class="small-12 small-centered columns">

                <!-- Article -->
                <article class="clearfix card shadow-1">
                    <div class="content small-12 columns">
                        <h3>A grande polêmica do REST</h3>

                        <p>Se você já desenvolveu uma API REST, você já deve ter se deparado com essa pergunta.</p>
                        <p>Devemos usar <strong>PUT ou POST</strong>? Qual a diferença entre eles?</p>

                        <p>Uma pergunta tão básica mas que causa uma grande discussão. Para respondê-la, precisamos olhar para o protocolo HTTP.
                            Roy Fielding, um dos criadores do conceito REST <a href="http://tools.ietf.org/html/draft-ietf-httpbis-p2-semantics-16#section-7.5" target="_blank">descreve</a> o POST e PUT
                            de maneira bem semelhante, mas com uma leve e crucial diferença.</p>

                        <h4>POST</h4>
                        <blockquote>
                            O método <strong>POST</strong> ordena que o servidor receba a requisição, bem como o dado incluso, e solicite para aquele
                            recurso (URI) processar a requisição.<br />
                            Caso um recurso foi criado, o resultado da ação deve ser um status 201 (Created) e conter este novo recurso.<br />
                            Caso o resultado da ação não criou um recurso, por exemplo, enviou um email para o cliente, o resultado da ação deve ser
                            um status 204 (No content) ou 200 (OK).
                        </blockquote>

                        <h4>PUT</h4>
                        <blockquote>
                            Uma requisição PUT garante que o recurso deve ser criado ou substituido pela mensagem enviada na requisição, sempre.
                            Sendo sucesso, uma próxima requisição pelo método GET na mesma URL deve resultar na representação
                            equivalente com o status 200 (OK).<br />
                            Se o recurso indicado pela URI não existir, ele deve ser criado e um retorno 201 deve ser exibido.<br />
                            Caso o recurso exista e seja substituido pela nova mensagem, tanto um status 200 ou 204 deve ser retornado.
                        </blockquote>

                        <h4>Idempotência</h4>
                        <p>Outra confusão que ocorre é sobre a idempotência dos métodos. Idempotência é a propriedade que operações têm de poderem ser aplicadas
                            diversas vezes sem alterar o resultado inicial. Considere os seguintes exemplos, sendo X um número inteiro positivo:
                        </p>
                        <pre>
1: X = 1
                        </pre>

                        <pre>
2: X = X + 1
                        </pre>

                        <pre>
3: X = X * 1
                        </pre>
                        <p>O primeiro exemplo é idempotente, ou seja, caso ele seja executado diversas vezes, o valor final sempre será o mesmo. No caso X sempre será igual a 1.<br />
                            Já o segundo caso é diferente. Caso a operação seja executada diversas vezes, o valor de X será sempre diferente. Este caso não é idempotente.<br />
                            E no terceiro caso? Sendo X um número inteiro positivo, consegue saber se a operação é idempotente ou não? Comente abaixo o que você acha.</p>

                        <p>No REST, o método POST <strong>não</strong> é idempotente, pois uma vez um recurso criado, você não poderá recria-lo.
                            No entanto, o PUT é idempotente. Ao solicitar para que os dados de um recurso sejam trocado por novos,
                            o servidor sempre trocará os dados, sendo o resultado final o mesmo.<br />
                        É parecido com nosso primeiro exemplo. Estamos sempre trocando o valor de X por um mesmo valor.</p>


                        <h3>Resumindo</h3>

                        <h4>Quando usar o POST</h4>
                        <ul>
                            <li>Quando você não souber o ID do recurso. Ele será criado pelo servidor e retornado para você no resultado.</li>
                            <li>Quando a requisição não necessariamente criar um recurso. Por exemplo, ao enviar um e-mail, iniciar um workflow.</li>
                        </ul>

                        <h4>Quando usar um PUT</h4>
                        <ul>
                            <li>Quando você quiser alterar um recurso que já existe e você sabe seu ID. </li>
                            <li>Quando você quiser criar um recurso e sabe qual sua URI única.</li>
                        </ul>


                        <h3>Exemplos</h3>
                        <ul>
                            <li>POST - /api/usuario - Cria um novo usuário</li>
                            <li>PUT &nbsp;- /api/usuario/123 - Altera o usuário com ID 123</li>
                            <li>POST - /api/email - Envia um novo e-mail</li>
                            <li>POST - /api/tweet/123/favorito - Favorita o tweet com ID 123</li>
                            <li>POST - /api/usuario/123/posts/like - Curte todos os posts do usuário 123</li>
                            <li>POST - /api/post/comentario/123/comentario - Cria um sub-comentário do comentário com ID 123</li>
                            <li>PUT &nbsp;- /api/post/put-ou-post - Cria um novo artigo com ID igual a put-ou-post (<a href="http://www.w3.org/Provider/Style/URI" target="_blank">URL-friendly</a>)</li>
                            <li>PUT &nbsp;- /api/carro/AAA-1234 - Altera os valores do carro com placa AAA-1234 ou cria um novo</li>
                        </ul>

                    </div>

                </article>
            </div>
        </div>
    </main>
</section>